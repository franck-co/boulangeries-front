(this["webpackJsonppedagome-app-front"]=this["webpackJsonppedagome-app-front"]||[]).push([[0],{460:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),i=n(16),s=n(360),u=n(31),f={snackbar:{open:!1,severity:"info",message:"",close:Object(u.b)((function(e){e.open=!1})),show:Object(u.b)((function(e,t){var n=t.message,r=t.severity,a=void 0===r?"info":r;Object.assign(e,{message:n,severity:a,open:!0})}))}},l=n(124),d=n.n(l),b=n(185),j=n(186),p=n.n(j),O=p.a.create({baseURL:"https://pedagome-bakery-backend.herokuapp.com/api",timeout:3e4,headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5OTk5OTk5OTk5IiwibmFtZSI6IlZpYnJleiBSdWdieSBhZG1pbiIsImlhdCI6MTUxNjIzOTAyMn0.izolUSQodBdkuM25MHAhtV3uAMacLAPsxT9mh3pB7Hc"}}),h={form:{coupons:"20",name:"",reset:Object(u.b)((function(e){Object.assign(e,X.generator.form)})),handleChange:Object(u.b)((function(e,t){e[t.target.id]=t.target.value})),handleSubmit:Object(u.g)(function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){var a,o,c,i,s,u,f,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,o=r.getStoreActions,c=o,"levure"==(i=a()).password){e.next=6;break}return c().app.snackbar.show({message:"Mot de passe incorrect",severity:"warning"}),e.abrupt("return");case 6:if(i.name){e.next=9;break}return c().app.snackbar.show({message:"Nom du client manquant",severity:"warning"}),e.abrupt("return");case 9:if(s=parseInt(i.coupons,10),!(isNaN(s)||s<=0||s%5)){e.next=13;break}return c().app.snackbar.show({message:"Le nombre de coupons doit \xeatre un multiple de 5",severity:"warning"}),e.abrupt("return");case 13:return e.prev=13,c().app.snackbar.show({message:"D\xe9marrage ...",severity:"info"}),e.next=17,O.post("/coupon/generate",{coupons:i.coupons,name:i.name},{responseType:"blob"});case 17:u=e.sent,f=window.URL.createObjectURL(new Blob([u.data])),(l=document.createElement("a")).href=f,l.setAttribute("download","coupons.zip"),document.body.appendChild(l),l.click(),c().app.snackbar.show({message:"coupons g\xe9n\xe9r\xe9s !",severity:"success"}),t.reset(),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(13),console.log(e.t0),c().app.snackbar.show({message:"Une erreur est survenue (voir console) !",severity:"error"});case 32:case"end":return e.stop()}}),e,null,[[13,28]])})));return function(t,n,r){return e.apply(this,arguments)}}())}},m=n(252),g=n(79),v=n(80),y=n(153),S=n(205),x=n(204),k=n(90),w=(n(394),function(){function e(){Object(g.a)(this,e),this.model={},this.models=[],this.properties=[],this.actions=[],this.computed=[],this.listeners=[],this.thunks=[],this.instances=[]}return Object(v.a)(e,[{key:"addModelMetadata",value:function(e){this.models.push({ctor:e.ctor.prototype,modelName:e.modelName}),this.instances.push({ctor:e.ctor.prototype,instance:new e.ctor})}},{key:"addPropertyMetadata",value:function(e){this.properties.push(e)}},{key:"addActionMetadata",value:function(e){this.actions.push(e)}},{key:"addComputedMetadata",value:function(e){this.computed.push(e)}},{key:"addListenerMetadata",value:function(e){this.listeners.push(e)}},{key:"addThunkMetadata",value:function(e){this.thunks.push(e)}},{key:"buildModel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.models.forEach((function(n){var r=n.ctor,a=n.modelName;e.model[a]={},e.properties.filter((function(e){return e.ctor===r})).forEach((function(t){var n=e.instances.find((function(e){return e.ctor===t.ctor})),r=null===n||void 0===n?void 0:n.instance[t.fieldName];e.model[a][t.fieldName]=r})),e.actions.filter((function(e){return e.ctor===r})).forEach((function(t){e.model[a][t.fieldName]=Object(u.b)((function(e,n){t.handler.call(e,n)}))})),e.computed.filter((function(e){return e.ctor===r})).forEach((function(t){e.model[a][t.fieldName]=Object(u.d)((function(e){return t.handler.call(e)}))})),e.listeners.filter((function(e){return e.ctor===r})).forEach((function(t){e.model[a][t.fieldName]=Object(u.c)(t.actionFn,(function(e,n){t.handler.call(e,n)}))})),e.thunks.filter((function(e){return e.ctor===r})).forEach((function(t){e.model[a][t.fieldName]=Object(u.g)((function(e,n,r){var a=r.getState,o=r.getStoreActions,c=r.getStoreState;return t.handler.call(Object(i.a)(Object(i.a)(Object(i.a)({},a()),e),{},{getStoreActions:o,getStoreState:c}),n)}))})),t||(e.model=e.model[a])})),this.model}}]),e}()),A=new(function(){function e(){Object(g.a)(this,e),this.pool=[]}return Object(v.a)(e,[{key:"getMetadataStorage",value:function(e){var t=e;return this.pool[t]}},{key:"createMetadataStorage",value:function(e){var t=e;return this.pool[t]=new w,this.getMetadataStorage(e)}}]),e}());function I(e,t){var n,r=e,a=r.constructor.__symbol;a?(console.log("symbo ",a,"trouv\xe9 !"),n=A.getMetadataStorage(a)):(a=Symbol(e.constructor.name),n=A.createMetadataStorage(a),r.constructor.__symbol=a),t(n)}function M(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1];I(r,(function(e){return e.addPropertyMetadata({ctor:r,fieldName:a})}))}}function R(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2].value;I(r,(function(e){return e.addActionMetadata({ctor:r,fieldName:a,handler:o})}))}}function L(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],c=o.value;o.get;I(r,(function(e){return e.addThunkMetadata({ctor:r,fieldName:a,handler:c})}))}}var C,N,T,D=function(){function e(){Object(g.a)(this,e)}return Object(v.a)(e,null,[{key:"obj",get:function(){return A.getMetadataStorage(this.__symbol).buildModel()}},{key:"objWithName",get:function(){return A.getMetadataStorage(this.__symbol).buildModel(!0)}}]),e}();D.__symbol=void 0;var E,z,P,F,_,B,J,U,W,G,$=(C=R(),N=L(),T=function(e){Object(S.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getStoreActions=function(){},e.getStoreState=function(){},e}return Object(v.a)(n,[{key:"setStateFn",value:function(e){e(this)}},{key:"resetInitial",value:function(e){this.setStateFn((function(t){Object.assign(t,e(X))}))}}]),n}(D),Object(k.a)(T.prototype,"setStateFn",[C],Object.getOwnPropertyDescriptor(T.prototype,"setStateFn"),T.prototype),Object(k.a)(T.prototype,"resetInitial",[N],Object.getOwnPropertyDescriptor(T.prototype,"resetInitial"),T.prototype),T),H=p.a.create({baseURL:"https://pedagome-bakery-backend.herokuapp.com/api",timeout:5e3,headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5OTk5OTk5OTk5IiwibmFtZSI6IlZpYnJleiBSdWdieSBhZG1pbiIsImlhdCI6MTUxNjIzOTAyMn0.izolUSQodBdkuM25MHAhtV3uAMacLAPsxT9mh3pB7Hc"}}),V=(E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return console.log("Class Decorator factory"),function(t){var n=t.__symbol;A.getMetadataStorage(n).addModelMetadata({ctor:t,modelName:e})}}("list"),z=M(),P=M(),F=R(),_=L(),E((J=function(e){Object(S.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(m.a)(e,"data",U,Object(y.a)(e)),Object(m.a)(e,"isLoaded",W,Object(y.a)(e)),e}return Object(v.a)(n,[{key:"setData",value:function(e){this.data=e}},{key:"handleRefresh",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("coupon").catch(console.error);case 2:(t=e.sent)&&t.data&&this.setData(t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($),U=Object(k.a)(J.prototype,"data",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=Object(k.a)(J.prototype,"isLoaded",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(k.a)(J.prototype,"setData",[F],Object.getOwnPropertyDescriptor(J.prototype,"setData"),J.prototype),Object(k.a)(J.prototype,"handleRefresh",[_],Object.getOwnPropertyDescriptor(J.prototype,"handleRefresh"),J.prototype),B=J))||B),Z=n(357),Y={app:f,generator:h,list:V.obj},Q=u.e(Y),X=Object(Z.cloneDeep)(Q.getState()),q=n(82),K=n.n(q),ee=(Q.getState,Q.getActions,function(){var e=u.f();return{useStoreActions:e.useStoreActions,useStoreActionsLoose:e.useStoreActions,useStoreState:e.useStoreState,useStoreStateLoose:e.useStoreState,useStoreDispatch:e.useStoreDispatch}}()),te=ee.useStoreActionsLoose,ne=(ee.useStoreDispatch,ee.useStoreStateLoose),re=(G=ee,function(e){return{useLocalActions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return G.useStoreActions((function(n){return t(e(n))}))},useLocalActionsLoose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return G.useStoreActions((function(n){return t(e(n))}))},useLocalState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return G.useStoreState((function(n){return t(e(n))}))},useLocalStateLoose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return G.useStoreState((function(n){return t(e(n))}))}}}),ae=function(e){return ne((function(t){return K.a.get(t,e)}))};var oe=function(e){var t=e.useEzState$,n=e.useEzActions$;return function(e){return{useLocalActions$:function(t){return n([e,t].join("."))},useLocalState$:function(n){return t([e,n].join("."))}}}}({useEzState$:ae,useEzActions$:function(e){return te((function(t){return K.a.get(t,e)}))}}),ce=n(487),ie=n(323),se=n(237),ue=n(324),fe=n(12);function le(){console.log("useEzState : ",typeof ne);var e=ne((function(e){return e.generator.form})),t=te((function(e){return e.generator.form.handleChange})),n=te((function(e){return e.generator.form.handleSubmit}));return Object(fe.jsxs)(a.a.Fragment,{children:[Object(fe.jsx)(ce.a,{item:!0,xs:12,children:Object(fe.jsx)(ie.a,{value:e.coupons,id:"coupons",onChange:t,label:"Nombre de coupons (multiple de 5): ",fullWidth:!0,variant:"outlined"})}),Object(fe.jsx)(ce.a,{item:!0,xs:12,children:Object(fe.jsx)(ie.a,{value:e.name,id:"name",onChange:t,label:"Nom du client: ",fullWidth:!0,variant:"outlined"})}),Object(fe.jsx)(ce.a,{item:!0,xs:12,children:Object(fe.jsx)(ie.a,{value:e.password,id:"password",onChange:t,label:"Mot de passe: ",type:"password",fullWidth:!0,variant:"outlined"})}),Object(fe.jsx)(ce.a,{item:!0,xs:12,children:Object(fe.jsx)(se.a,{textAlign:"center",children:Object(fe.jsx)(ue.a,{onClick:function(){return n()},variant:"contained",color:"primary",children:"G\xe9n\xe9rer"})})})]})}function de(){return Object(fe.jsx)(ce.a,{container:!0,spacing:3,justify:"center",alignItems:"center",direction:"column",style:{height:"100%"},children:Object(fe.jsxs)(ce.a,{container:!0,item:!0,spacing:5,xs:4,children:[Object(fe.jsx)("h1",{children:"Generateur de coupons"}),Object(fe.jsx)(le,{})]})})}var be=n(249),je=n.n(be),pe=n(500),Oe=n(501),he=n(502),me=n(503),ge=n(504),ve=n(505),ye=n(506),Se=n(507),xe=n(508),ke=n(509),we=n(510),Ae=n(511),Ie=n(512),Me=n(513),Re=n(514),Le=n(515),Ce=n(516),Ne={Add:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(pe.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Oe.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(he.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(me.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(ge.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(ve.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(ye.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Se.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(xe.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(ke.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(ge.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(we.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(he.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Ae.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Ie.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Me.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Re.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Refresh:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Le.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))})),Visibility:Object(r.forwardRef)((function(e,t){return Object(fe.jsx)(Ce.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))}))},Te=n(160),De=re((function(e){return e.list})),Ee=De.useLocalState,ze=De.useLocalActions;function Pe(){var e=Ee((function(e){return e})),t=ze((function(e){return e}));return Object(r.useEffect)((function(){!e.isLoaded&&t.handleRefresh()}),[e.isLoaded]),Object(fe.jsx)(je.a,{icons:Ne,columns:[{field:"couponId",title:"R\xe9f\xe9rence"},{field:"customerName",title:"Client"},{field:"createdAt",title:"Cr\xe9\xe9 le",render:function(e){return Te.DateTime.fromISO(e.createdAt).toLocaleString(Te.DateTime.DATE_MED_WITH_WEEKDAY)}},{field:"isConsumed",title:"Etat",render:function(e){return e.isConsumed?"Scann\xe9":e.isActive?"Actif":"D\xe9sactiv\xe9"}},{field:"bakeryName",title:"Boulangerie"}],data:e.data,actions:[{icon:function(){return Object(fe.jsx)(Ne.Refresh,{})},tooltip:"Rafraichir les donn\xe9es",isFreeAction:!0,onClick:function(){return t.handleRefresh()}}],options:{grouping:!1,filtering:!0,pageSize:50,pageSizeOptions:[10,20,50,100,300]}})}var Fe=n(497),_e=n(518),Be=n(496),Je=n(499),Ue=n(517),We=re((function(e){return e.app})),Ge=oe("app"),$e=function(){var e=Object(r.useState)(0),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(fe.jsxs)(se.a,{height:"100%",children:[Object(fe.jsx)(He,{currentTabIndex:n,setTabIndex:a}),Object(fe.jsx)(Ze,{index:n}),Object(fe.jsx)(Ye,{})]})};function He(e){var t=e.currentTabIndex,n=e.setTabIndex;return Object(fe.jsx)(Fe.a,{position:"static",children:Object(fe.jsxs)(_e.a,{value:t,onChange:function(e,t){return n(t)},children:[Object(fe.jsx)(Be.a,{label:"G\xe9n\xe9rateur"}),Object(fe.jsx)(Be.a,{label:"Liste"})]})})}function Ve(e){return Object(fe.jsx)(Ue.a,Object(i.a)({elevation:6,variant:"filled"},e))}function Ze(e){var t=[de,Pe][e.index];return Object(fe.jsx)(t,{})}function Ye(){ae("app.snackbar.severity");var e=We.useLocalState((function(e){return e.snackbar})),t=Ge.useLocalState$("snackbar.severity"),n=te((function(e){return e.app.snackbar.close}));return Object(fe.jsx)(Je.a,{open:e.open,autoHideDuration:4500,onClose:function(){return n()},children:Object(fe.jsx)(Ve,{onClose:function(){return n()},severity:t,children:e.message})})}var Qe=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,888)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Xe=n(111),qe=n(491),Ke=n(498);Te.Settings.defaultLocale="fr";var et=Object(Xe.a)({});c.a.render(Object(fe.jsxs)(qe.a,{theme:et,children:[Object(fe.jsx)(Ke.a,{}),Object(fe.jsx)(a.a.StrictMode,{children:Object(fe.jsx)(u.a,{store:Q,children:Object(fe.jsx)($e,{})})})]}),document.getElementById("root")),Qe()}},[[460,1,2]]]);
//# sourceMappingURL=main.5ffc20a0.chunk.js.map